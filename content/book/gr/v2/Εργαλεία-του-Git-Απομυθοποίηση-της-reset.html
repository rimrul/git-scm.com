---
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: gr
  chapter:
    title: Εργαλεία του Git
    number: 7
  section:
    title: Απομυθοποίηση της reset
    number: 7
    cs_number: '7.7'
    previous: book/gr/v2/Εργαλεία-του-Git-Η-ιστορία-ξαναγράφεται
    next: book/gr/v2/Εργαλεία-του-Git-Συγχωνεύσεις-για-προχωρημένους
title: Git - Απομυθοποίηση της reset

---
<h2 id="r_git_reset">Απομυθοποίηση της <code>reset</code>
</h2>
<div class="paragraph">
<p>Πριν προχωρήσουμε σε πιο εξειδικευμένα εργαλεία, ας μιλήσουμε για τα <code>reset</code> και <code>checkout</code>.
Αυτές οι εντολές είναι δύο από τα πιο δυσνόητα σημεία του Git όταν τα συναντά κανείς για πρώτη φορά.
Κάνουν τόσο πολλά πράγματα, που φαίνεται να μην υπάρχει καμία ελπίδα πραγματικής κατανόησης σωστής χρήσης τους.
Γι' αυτό, θα κάνουμε μία απλή μεταφορά.</p>
</div>
<div class="sect3">
<h3 id="_τα_τρία_δέντρα">Τα τρία δέντρα</h3>
<div class="paragraph">
<p>Ένας ευκολότερος τρόπος για να σκεφτούμε τα <code>reset</code> και <code>checkout</code> είναι μέσα από ένα νοητική πλαίσιο στο οποίο το Git είναι διαχειριστής του περιεχομένου τριών διαφορετικών δέντρων.
Με τον όρο “δέντρο” εδώ εννοούμε ουσιαστικά “συλλογή αρχείων”, όχι ειδικότερα τη δομή δεδομένων.
(Υπάρχουν μερικές περιπτώσεις στις οποίες το Ευρετήριο δεν λειτουργεί ακριβώς όπως ένα δέντρο, αλλά για τον σκοπό μας είναι ευκολότερο να το σκεφτούμε με αυτόν τον τρόπο προς το παρόν.)</p>
</div>
<div class="paragraph">
<p>Το Git, ως σύστημα, διαχειρίζεται και μεταχειρίζεται τρία δέντρα στην κανονική του λειτουργία:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Δέντρο</th>
<th class="tableblock halign-left valign-top">Ρόλος</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Στιγμιότυπο τελευταίας υποβολής, επόμενος γονέας</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ευρετήριο</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Προτεινόμενο στιγμιότυπο για την επόμενη υποβολή</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Κατάλογος Εργασίας</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Αμμοδοχείο</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h4 id="_το_δέντρο_head">Το δέντρο HEAD</h4>
<div class="paragraph">
<p>Ο HEAD είναι ο δείκτης στην αναφορά του τρέχοντος κλάδου, ο οποίος με τη σειρά του είναι ένας δείκτης στην τελευταία υποβολή που έγινε σε αυτόν τον κλάδο.
Αυτό σημαίνει ότι ο HEAD θα είναι ο γονέας της επόμενης υποβολής που δημιουργείται.
Είναι γενικά απλούστερο να σκεφτόμαστε τον HEAD ως το στιγμιότυπο <strong>της τελευταίας μας υποβολής σε αυτόν τον κλάδο</strong>.</p>
</div>
<div class="paragraph">
<p>Στην πραγματικότητα, είναι αρκετά εύκολο να δούμε με τι μοιάζει αυτό το στιγμιότυπο.
Ακολουθεί ένα παράδειγμα της πραγματικής λίστας καταλόγου και των αθροισμάτων ελέγχου SHA-1 για κάθε αρχείο στο στιγμιότυπο HEAD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git cat-file -p HEAD
tree cfda3bf379e4f8dba8717dee55aab78aef7f4daf
author Scott Chacon  1301511835 -0700
committer Scott Chacon  1301511835 -0700

initial commit

$ git ls-tree -r HEAD
100644 blob a906cb2a4a904a152...   README
100644 blob 8f94139338f9404f2...   Rakefile
040000 tree 99f1a6d12cb4b6f19...   lib</code></pre>
</div>
</div>
<div class="paragraph">
<p>Οι εντολές <code>cat-file</code> και <code>ls-tree</code> είναι εντολές “διοχέτευσης” που χρησιμοποιούνται για πράγματα χαμηλότερου επιπέδου και σπάνια  χρησιμοποιούνται στην καθημερινή εργασία μας, αλλά μας βοηθούν να δούμε τι συμβαίνει εδώ.</p>
</div>
</div>
<div class="sect4">
<h4 id="r_the_index">Το Ευρετήριο</h4>
<div class="paragraph">
<p>Το Ευρετήριο είναι <strong>η προτεινόμενη επόμενη υποβολή</strong>.
Έχουμε επίσης αναφερθεί σε αυτήν την έννοια ως “στάδιο καταχώρισης” του Git, καθώς αυτό εξετάζει το Git όταν τρέχουμε την ‘git commit’.</p>
</div>
<div class="paragraph">
<p>Από τεχνικής άποψης το Ευρετήριο δεν είναι δομή δέντρου —στην πραγματικότητα έχει υλοποιηθεί ως ισοπεδωμένο δηλωτικό (manifest— αλλά για τον σκοπό μας είναι αρκετά κοντά σε ένα δένδρο.</p>
</div>
<div class="paragraph">
<p>Το Git γεμίζει αυτό το ευρετήριο με μια λίστα των περιεχομένων όλων των τελευταίων αρχείων που έχουν ενημερωθεί (checkout) στον κατάλογο εργασίας μας και με τι έμοιαζαν τα αρχεία όταν ενημερώθηκαν.
Στη συνέχεια, αντικαθιστούμε μερικά από αυτά τα αρχεία με νέες εκδόσεις τους και εκτελούμε μία <code>git commit</code> που το μετατρέπει στο δέντρο για μια νέα υποβολή.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git ls-files -s
100644 a906cb2a4a904a152e80877d4088654daad0c859 0	README
100644 8f94139338f9404f26296befa88755fc2598c289 0	Rakefile
100644 47c6340d6459e05787f644c2447d2595f5d3a54b 0	lib/simplegit.rb</code></pre>
</div>
</div>
<div class="paragraph">
<p>Και πάλι εδώ χρησιμοποιούμε την εντολή `ls-files ', η οποία είναι περισσότερο μια εντολή παρασκηνίου που μας δείχνει με τι μοιάζει το Ευρετήριο μας αυτήν τη στιγμή.</p>
</div>
</div>
<div class="sect4">
<h4 id="_ο_κατάλογος_εργασίας">Ο Κατάλογος Εργασίας</h4>
<div class="paragraph">
<p>Τέλος, έχουμε τον κατάλογο εργασίας μας.
Τα άλλα δύο δέντρα αποθηκεύουν το περιεχόμενό τους με έναν αποτελεσματικό αλλά καθόλου βολικό τρόπο, μέσα στον φάκελο <code>.git</code>.
Ο κατάλογος εργασίας το απλώνει σε πραγματικά αρχεία, πράγμα που καθιστά την επεξεργασία τους πολύ πιο εύκολη για μας.
Μπορούμε να σκεφτούμε τον κατάλογο εργασίας ως <strong>αμμοδοχείο</strong>, όπου μπορούμε να δοκιμάσουμε αλλαγές πριν να τις υποβάλλουμε στο στάδιο καταχώρισης (Ευρετήριο) και στη συνέχεια στο ιστορικό.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ tree
.
├── README
├── Rakefile
└── lib
    └── simplegit.rb

1 directory, 3 files</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_η_ροή_εργασίας">Η ροή εργασίας</h3>
<div class="paragraph">
<p>Ο κύριος σκοπός του Git είναι να καταγράφει στιγμιότυπα του έργου μας σε διαδοχικά καλύτερες καταστάσεις, χειριζόμενο αυτά τα τρία δέντρα.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-workflow.png" >}}" alt="reset workflow">
</div>
</div>
<div class="paragraph">
<p>Ας οπτικοποιήσουμε αυτήν τη διαδικασία: ας πούμε ότι πηγαίνουμε σε έναν νέο κατάλογο με μόνον ένα αρχείο σε αυτόν.
Θα ονομάσουμε αυτήν την έκδοση του αρχείου <strong>v1</strong> και θα το απεικονίζουμε με μπλε χρώμα.
Τώρα τρέχουμε την <code>git init</code>, η οποία θα δημιουργήσει ένα αποθετήριο Git με μια αναφορά HEAD που δείχνει σε έναν κλάδο που δεν υπάρχει (ο <code>master</code> δεν υπάρχει ακόμα).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-ex1.png" >}}" alt="reset ex1">
</div>
</div>
<div class="paragraph">
<p>Σε αυτό το σημείο, μόνο το δέντρο του Καταλόγου Εργασίας έχει κάποιο περιεχόμενο.</p>
</div>
<div class="paragraph">
<p>Τώρα θέλουμε να υποβάλουμε αυτό το αρχείο, οπότε χρησιμοποιούμε την <code>git add</code> για να πάρουμε το περιεχόμενο που βρίσκεται στον Κατάλογο Εργασίας και να το αντιγράψουμε στο Ευρετήριο.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-ex2.png" >}}" alt="reset ex2">
</div>
</div>
<div class="paragraph">
<p>Στη συνέχεια, τρέχουμε την <code>git commit</code>, η οποία παίρνει τα περιεχόμενα του Ευρετηρίου και τα αποθηκεύει ως μόνιμο στιγμιότυπο, δημιουργεί ένα αντικείμενο υποβολής το οποίο δείχνει σε αυτό το στιγμιότυπο και ενημερώνει τον <code>master</code> να δείχνει σε αυτήν την υποβολή.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-ex3.png" >}}" alt="reset ex3">
</div>
</div>
<div class="paragraph">
<p>Αν εκτελέσουμε την <code>git status</code>, δεν θα δούμε αλλαγές, αφού και τα τρία δέντρα είναι τα ίδια.</p>
</div>
<div class="paragraph">
<p>Τώρα θέλουμε να κάνουμε μια αλλαγή σε αυτό το αρχείο και να την υποβάλλουμε.
Θα επαναληφθεί η ίδια διαδικασία· πρώτα αλλάζουμε το αρχείο στον Κατάλογο Εργασίας μας.
Ας ονομάσουμε αυτην την έκδοση του αρχείου <strong>v2</strong> και θα την απεικονίζουμε με κόκκινο χρώμα.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-ex4.png" >}}" alt="reset ex4">
</div>
</div>
<div class="paragraph">
<p>Αν εκτελέσουμε την εντολή <code>git status</code> τώρα, το αρχείο θα εμφανιστεί με κόκκινο χρώμα με την ένδειξη “Changes not staged for commit”, επειδή αυτή η εγγραφή διαφέρει μεταξύ του Ευρετηρίου και του Καταλόγου Εργασίας.
Στη συνέχεια τρέχουμε την <code>git add</code> σε αυτό για να το προσθέσουμε στο Ευρετήριο μας.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-ex5.png" >}}" alt="reset ex5">
</div>
</div>
<div class="paragraph">
<p>Σε αυτό το σημείο, αν εκτελέσουμε την <code>git status</code> θα δούμε το αρχείο πράσινο κάτω από την ένδειξη <code>Changes to be committed</code> επειδή το Ευρετήριο και ο HEAD διαφέρουν —δηλαδή, η προτεινόμενη επόμενη υποβολή μας τώρα είναι διαφορετική από την τελευταία μας υποβολή.
Τέλος, τρέχουμε <code>git commit</code> για να οριστικοποιήσουμε την υποβολή.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-ex6.png" >}}" alt="reset ex6">
</div>
</div>
<div class="paragraph">
<p>Τώρα η <code>git status</code> δεν θα μας δώσει καμία έξοδο, αφού και τα τρία δέντρα είναι τα ίδια ξανά.</p>
</div>
<div class="paragraph">
<p>Όταν μεταβαίνουμε από έναν κλάδο σε άλλον ή κλωνοποιούμε, γίνεται μία παρόμοια διαδικασία.
Όταν μεταβαίνουμε σε έναν κλάδο, αλλάζει ο <strong>HEAD</strong> ώστε να δείχνει στο ref του νέου κλάδου, το Ευρετήριο γεμίζει με το στιγμιότυπο αυτής της υποβολής και στη συνέχεια τα περιεχόμενα του <strong>Ευρετηρίου</strong> αντιγράφουνται στον <strong>Κατάλογο Εργασίας</strong>.</p>
</div>
</div>
<div class="sect3">
<h3 id="_ο_ρόλος_της_reset">Ο ρόλος της <code>reset</code>
</h3>
<div class="paragraph">
<p>Η εντολή <code>reset</code> γίνεται κατανοητή πιο εύκολα στο παρακάτω πλαίσιο.
Για τους σκοπούς αυτών των παραδειγμάτων, ας πούμε ότι τροποποιήσαμε ξανά το <code>file.txt</code> και το υποβάλαμε για τρίτη φορά.
Έτσι τώρα το ιστορικό μας μοιάζει με αυτό:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-start.png" >}}" alt="reset start">
</div>
</div>
<div class="paragraph">
<p>Ας δούμε τώρα τι ακριβώς κάνει η <code>reset</code> όταν την καλούμε.
Χειραγωγεί άμεσα αυτά τα τρία δέντρα με έναν απλό και προβλέψιμο τρόπο.
Κάνει το πολύ μέχρι τρεις βασικές λειτουργίες.</p>
</div>
<div class="sect4">
<h4 id="_βήμα_1_μετακίνηση_του_head">Βήμα 1: μετακίνηση του HEAD</h4>
<div class="paragraph">
<p>Το πρώτο πράγμα που κάνει η <code>reset</code> είναι να μετακινήσει το πού δείχνει ο HEAD.
Αυτό δεν είναι το ίδιο με το να αλλάζει τον ίδιο τον HEAD (που είναι αυτό που κάνει η <code>checkout</code>). Η <code>reset</code> μετακινεί τον κλάδο στον οποίο δείχνει ο HEAD.
Αυτό σημαίνει ότι αν ο HEAD έχει τεθεί στον κλάδο <code>master</code> (δηλ. βρισκόμαστε στον κλάδο <code>master</code>), η <code>git reset 9e5e6a4</code> θα ξεκινήσει κάνοντας τον <code>master</code> να δείχνει στην <code>9e5e6a4</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-soft.png" >}}" alt="reset soft">
</div>
</div>
<div class="paragraph">
<p>Ανεξάρτητα από το με τι διακόπτες καλούμε την <code>reset</code>, αυτό είναι το πρώτο πράγμα που θα προσπαθήσει πάντα να κάνει.
Με τον διακόπτη `--soft ', απλά θα σταματήσει εκεί.</p>
</div>
<div class="paragraph">
<p>Τώρα ας σταθούμε λίγο σε αυτό το διάγραμμα και για να συνειδητοποιήσουμε τι συνέβη: ουσιαστικά ξέκανε την τελευταία εντολή <code>git commit</code>.
Όταν εκτελούμε την <code>git commit</code>, το Git δημιουργεί μια νέα υποβολή και μετακινεί τον κλάδο στον οποίο δείχνει ο HEAD σε αυτήν.
Όταν επαναφέρουμε (<code>reset</code>) στον <code>HEAD~</code> (τον γονέα του <code>HEAD</code>), μετακινούμε τον κλάδο πίσω στο σημείο στο οποίο βρισκόταν, χωρίς να αλλάξουμε τον Ευρετήριο ή τον Κατάλογο Εργασίας.
Θα μπορούσαμε τώρα να ενημερώσουμε τον Ευρετήριο και να εκτελέσουμε ξανά την <code>git commit</code> για να ολοκληρώσουμε τι θα έκανε η <code>git commit --amend</code> (βλ. ενότητα <a href="ch00/r_git_amend">Αλλαγή της τελευταίας υποβολής</a>).</p>
</div>
</div>
<div class="sect4">
<h4 id="_βήμα_2_ενημέρωση_του_ευρετηρίου_mixed">Βήμα 2: Ενημέρωση του Ευρετηρίου (<code>--mixed</code>)</h4>
<div class="paragraph">
<p>Υπόψη ότι αν αν εκτελέσουμε την <code>git status</code> τώρα, θα δούμε με πράσινο τη διαφορά μεταξύ του Ευρετηρίου και του τι είναι ο νέος HEAD.</p>
</div>
<div class="paragraph">
<p>Το επόμενο πράγμα που θα κάνει η <code>reset</code> είναι να ενημερώσει το Ευρετήριο με τα περιεχόμενα εκείνου του στιγμιότυπου στο οποίο δείχνει τώρα ο HEAD.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-mixed.png" >}}" alt="reset mixed">
</div>
</div>
<div class="paragraph">
<p>Εάν καθορίσουμε την επιλογή <code>--mixed</code>, η <code>reset</code> θα σταματήσει σε αυτό το σημείο.
Αυτή είναι και η προεπιλογή, οπότε αν δεν καθορίσουμε καμία επιλογή (μόνο <code>git reset HEAD~</code> σε αυτήν την περίπτωση), η εντολή θα σταματήσει εδώ.</p>
</div>
<div class="paragraph">
<p>Τώρα ας σταθούμε για λίγο σε αυτό το διάγραμμα και να συνειδητοποιήσουμε τι συνέβη: πάλι ξέκανε την τελευταία μας υποβολή, αλλά επίσης <em>αφαίρεσε ό,τι υπήρχε στο στάδιο καταχώρισης</em>.
Επιστρέψαμε στο σημείο που είμασταν πριν εκτελέσουμε τις εντολές <code>git add</code> και <code>git commit</code>.</p>
</div>
</div>
<div class="sect4">
<h4 id="_βήμα_3_ενημέρωση_του_καταλόγου_εργασίας_hard">Βήμα 3: Ενημέρωση του Καταλόγου Εργασίας (<code>--hard</code>)</h4>
<div class="paragraph">
<p>Το τρίτο πράγμα που μπορεί να κάνει η <code>reset</code> είναι να κάνει τον Κατάλογο Εργασίας να είναι ίδιος με το Ευρετήριο.
Αν χρησιμοποιήσουμε την επιλογή <code>--hard</code>, θα συνεχίσει να κάνει ακριβώς αυτό.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-hard.png" >}}" alt="reset hard">
</div>
</div>
<div class="paragraph">
<p>Ας αναλογιστούμε λοιπόν τι συνέβη.
Ξεκάναμε την τελευταία υποβολή μας, τις εντολές <code>git add</code> και <code>git commit</code> <strong>και</strong> όλη την εργασία που κάναμε στον Κατάλογο Εργασίας μας.</p>
</div>
<div class="paragraph">
<p>Είναι σημαντικό να σημειωθεί ότι αυτή η σημαία (<code>--hard</code>) είναι ο μόνος τρόπος για να γίνει η εντολή <code>reset</code> επικίνδυνη και μια από τις ελάχιστες περιπτώσεις όπου το Git πραγματικά θα καταστρέψει δεδομένα.
Οποιαδήποτε άλλη επίκληση της <code>reset</code> μπορεί εύκολα να αναιρεθεί, αλλά η επιλογή <code>--hard</code> δεν μπορεί, αφού αντικαθιστά με το ζόρι τα αρχεία στον Κατάλογο Εργασίας.
Στη συγκεκριμένη περίπτωση, εξακολουθούμε να έχουμε την έκδοση <strong>v3</strong> του αρχείου μας σε μια υποβολή στη βάση δεδομένων του Git και θα μπορούσαμε να την επαναφέρουμε εξετάζοντας το <code>reflog</code> μας, αλλά αν δεν το είχαμε υποβάλει, το Git θα είχε και πάλι αντικαταστήσει το αρχείο και αυτήν τη φορά δεν θα ήταν ανακτήσιμο.</p>
</div>
</div>
<div class="sect4">
<h4 id="_ανακεφαλαίωση_8">Ανακεφαλαίωση</h4>
<div class="paragraph">
<p>Η εντολή <code>reset</code> αντικαθιστά αυτά τα τρία δέντρα με συγκεκριμένη σειρά και σταματά όταν της λέμε:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Μετακινεί τον κλάδο στον οποίο δείχνει ο HEAD <em>(εάν <code>--soft</code>, σταμάτα εδώ)</em></p>
</li>
<li>
<p>Κάνει το Ευρετήριο να είναι ιδιο με τον HEAD <em>(εάν  όχι <code>--hard</code>, σταμάτα εδώ)</em></p>
</li>
<li>
<p>Κάνει τον Κατάλογο Εργασίας να μοιάζει με το Ευρετήριο.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_επαναφορά_με_διαδρομή">Επαναφορά με διαδρομή</h3>
<div class="paragraph">
<p>Τα προηγούμενα καλύπτουν τη συμπεριφορά της <code>reset</code> στη βασική της μορφή, αλλά μπορούμε επίσης να της παράσχουμε μία διαδρομή στην οποία να δράσει.
Αν καθορίσουμε μια διαδρομή, η <code>reset</code> θα παραλείψει το Βήμα 1 και θα περιορίσει το υπόλοιπο των ενεργειών της σε ένα συγκεκριμένο αρχείο ή σύνολο αρχείων.
Αυτό πραγματικά έχει μία λογική —ο HEAD είναι απλώς ένας δείκτης και δεν μπορεί να δείχνει σε ένα τμήμα μίας υποβολής και σε ένα τμήμα μίας άλλης.
Αλλά το Ευρετήριο και ο Κατάλογος Εργασίας <em>μπορούν</em> να ενημερώνονται εν μέρει, οπότε η <code>reset</code> συνεχίζει με τα Bήματα 2 και 3.</p>
</div>
<div class="paragraph">
<p>Ας υποθέσουμε, λοιπόν, ότι τρέχουμε την <code>git reset file.txt</code>.
Αυτή η φόρμα (αφού δεν έχουμε καθορίσει τον αριθμό SHA-1 μιας υποβολής ή έναν κλάδο και δεν έχουμε ορίσει <code>--soft</code> ή <code>--hard</code>) είναι συντομογραφία της <code>git reset --mixed HEAD file.txt</code>, η οποίο θα:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Μετακινήσει τον κλάδο στον οποίο δείχνει ο HEAD <em>(παρακάμπτεται)</em></p>
</li>
<li>
<p>Κάνει το Ευρετήριο να μοιάζει με τον HEAD <em>(σταμάτα εδώ)</em></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Έτσι, ουσιαστικά απλά αντιγράφει το <code>file.txt</code> από τον HEAD στο Ευρετήριο.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-path1.png" >}}" alt="reset path1">
</div>
</div>
<div class="paragraph">
<p>Αυτό έχει το πρακτικό αποτέλεσμα της <em>αφαίρεσης του αρχείου από το στάδιο καταχώρισης</em>.
Αν κοιτάξουμε το διάγραμμα για αυτήν την εντολή και σκεφτούμε τι κάνει η <code>git add</code>, είναι ακριβώς το αντίθετο.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-path2.png" >}}" alt="reset path2">
</div>
</div>
<div class="paragraph">
<p>Αυτός είναι ο λόγος για τον οποίο η έξοδος της εντολής <code>git status</code> υπονοεί ότι την εκτελούμε για να αφαιρέσουμε ένα αρχείο από το στάδιο καταχώρισης.
(Περισσότερα σχετικά με αυτό υπάρχουν στην ενότητα <a href="ch00/r_unstaging">Αφαίρεση αρχείου από το στάδιο καταχώρισης</a>.)</p>
</div>
<div class="paragraph">
<p>Θα μπορούσαμε εξίσου εύκολα να μην αφήσουμε τον Git να υποθέσει ότι εννοούσαμε “έλξε τα δεδομένα από τον HEAD”, καθορίζοντας μια συγκεκριμένη υποβολή από την οποία θέλαμε αν έλξουμε αυτήν την έκδοση του αρχείου.
Απλά θα έπρεπε να τρέξουμε κάτι σαν την <code>git reset eb43bf file.txt</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-path3.png" >}}" alt="reset path3">
</div>
</div>
<div class="paragraph">
<p>Αυτό ουσιαστικά κάνει το ίδιο πράγμα με το να είχαμε επαναφέρει το περιεχόμενο του αρχείου στη <strong>v1</strong> στον Κατάλογο Εργασίας, να τρέξουμε <code>git add</code> σε αυτό και στη συνέχεια να το επαναφέρουμε ξανά στην <strong>v3</strong> (χωρίς στην πραγματικότητα να περάσουμε όλα αυτά τα στάδια).
Αν εκτελέσουμε τώρα την <code>git commit</code>, θα καταγράψει μια αλλαγή που θα επαναφέρει αυτό το αρχείο πίσω στην <strong>v1</strong>, παρόλο που στην πραγματικότητα ποτέ δεν το ξαναείχαμε στον Κατάλογο Εργασίας .</p>
</div>
<div class="paragraph">
<p>Είναι επίσης ενδιαφέρον να σημειώσουμε ότι όπως και η <code>git add</code>, η εντολή <code>reset</code> θα δέχεται μια επιλογή <code>--patch</code> για την αφαίρεση από το στάδιο καταχώρισης περιεχομένου κομμάτι-κομμάτι.
Επομένως, μπορούμε να αφαιρέσουμε από το στάδιο καταχώρισης ή να επαναφέρουμε περιεχόμενο, επιλεκτικά.
ert content.</p>
</div>
</div>
<div class="sect3">
<h3 id="_συναρμογή">Συναρμογή</h3>
<div class="paragraph">
<p>Ας δούμε πώς να κάνουμε κάτι ενδιαφέρον με αυτήν τη νέα δύναμη —τη συναρμογή υποβολών.</p>
</div>
<div class="paragraph">
<p>Ας πούμε ότι έχουμε μια σειρά υποβολών με μηνύματα όπως <code>oops.</code>, <code>WIP</code> και <code>forgot this file</code>.
Μπορούμε να χρησιμοποιήσουμε την <code>reset</code> για να τα συναρμόσουμε γρήγορα και εύκολα σε μια ενιαία υποβολή που μας κάνει να φανούμε πραγματικά έξυπνοι.
(Στην ενότητα <a href="ch00/r_squashing">Squashing Commits</a> υπάρχει ένας άλλος τρόπος για να το κάνουμε αυτό, αλλά σε αυτό το παράδειγμα θα χρησιμοποιήσουμε τη <em>reset</em> επειδή είναι απλούστερο.)</p>
</div>
<div class="paragraph">
<p>Ας υποθέσουμε ότι έχουμε ένα έργο στο οποίο η πρώτη υποβολή έχει ένα αρχείο, η δεύτερη υποβολή προσθέτει ένα νέο αρχείο και αλλάζει το πρώτο, και η τρίτη υποβολή αλλάζει το πρώτο αρχείο για άλλη μία φορά.
Η δεύτερη υποβολή ήταν έργο σε εξέλιξη και θέλουμε να τη συναρμόσουμε με την πρώτη.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-squash-r1.png" >}}" alt="reset squash r1">
</div>
</div>
<div class="paragraph">
<p>Μπορούμε να εκτελέσουμε την <code>git reset --soft HEAD~2</code> για να μετακινήσουμε τον κλάδο HEAD πίσω σε μια παλαιότερη υποβολή (την πρώτη υποβολή που θέλουμε να κρατήσουμε):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-squash-r2.png" >}}" alt="reset squash r2">
</div>
</div>
<div class="paragraph">
<p>Στη συνέχεια εκτελούμε ξανά την <code>git commit</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-squash-r3.png" >}}" alt="reset squash r3">
</div>
</div>
<div class="paragraph">
<p>Τώρα μπορούμε να δούμε ότι το προσβάσιμο ιστορικό μας, δηλαδή το ιστορικό που θα ωθήσουμε, τώρα μοιάζει σαν να είχαμε μία υποβολή με το αρχείο <code>file-a.txt</code> (v1), και στη συνέχεια μία δεύτερη που τροποποίησε το <code>file-a.txt</code> στο v3 και πρόσθεσε το <code>file-b.txt</code>.
Η υποβολη με την έκδοση v2 του αρχείου δεν βρίσκεται πλέον στο ιστορικό.</p>
</div>
</div>
<div class="sect3">
<h3 id="_check_out">Check out</h3>
<div class="paragraph">
<p>Τέλος, θα μπορούσε να αναρωτηθεί κανείς ποια είναι η διαφορά ανάμεσα στις <code>checkout</code> και <code>reset</code>.
Όπως η <code>reset</code>, έτσι και η <code>checkout</code> χειρίζεται τα τρία δέντρα και είναι λίγο διαφορετική ανάλογα με το αν της δίνουμε και μια διαδρομή αρχείου ή όχι.</p>
</div>
<div class="sect4">
<h4 id="_χωρίς_διαδρομή">Χωρίς διαδρομή</h4>
<div class="paragraph">
<p>Το τρέξιμο της <code>git checkout [branch]</code> είναι αρκετά παρόμοιο με το τρέξιμο της <code>git reset --hard [branch]</code> επειδή ενημερώνει και τα τρία δέντρα ώστε να μοιάζουν με τον <code>[branch]</code>, αλλά υπάρχουν δύο σημαντικές διαφορές.</p>
</div>
<div class="paragraph">
<p>Καταρχάς, σε αντίθεση με τη <code>reset --hard</code>, η <code>checkout</code> είναι ασφαλής για τον Κατάλογο Εργασίας· θα ελέγξει ώστε να βεβαιωθεί ότι δεν πετάει αρχεία που έχουν αλλαγές.
Στην πραγματικότητα, είναι λίγο πιο έξυπνο από αυτό —προσπαθεί να κάνει μια τετριμμένη συγχώνευση στον Κατάλογο Εργασίας, έτσι ώστε όλα τα αρχεία που <em>δεν</em> έχουμε αλλάξει να ενημερωθούν.
Αντίθετα η <code>reset --hard</code> απλά θα αντικαταστήσει τα πάντα χωρίς κανέναν έλεγχο.</p>
</div>
<div class="paragraph">
<p>Η δεύτερη σημαντική διαφορά είναι ο τρόπος ενημέρωσης του HEAD.
Ενώ η <code>reset</code> μετακινεί τον κλάδο στον οποίο ο HEAD, η <code>checkout</code> θα μετακινήσει τον ίδιο τον HEAD για να δείξει σε κάποιον άλλο κλάδο.</p>
</div>
<div class="paragraph">
<p>Για παράδειγμα, ας πούμε ότι έχουμε τους κλάδους <code>master</code> και <code>develop</code> που δείχνουν σε διαφορετικές υποβολές και αυτήν τη στιγμή βρισκόμαστε στον <code>develop</code> (άρα ο HEAD δείχνει σε αυτόν).
Εάν εκτελέσουμε την <code>git reset master</code>, ο <code>develop</code> θα δείχνει τώρα στην ίδια υποβολή που δείχνει ο <code>master</code>.
Αν αντίθετα τρέξουμε τη <code>git master checkout</code>, δεν θα κινηθεί ο <code>develop</code> αλλά ο <code>HEAD</code>.
Ο HEAD θα δείχνει τώρα στον <code>master</code>.</p>
</div>
<div class="paragraph">
<p>Επομένως και στις δύο περιπτώσεις ο <code>HEAD</code> μετακινείται, ώστε να δείχνει στην υποβολή A, αλλά το <em>πώς</em> γίνεται αυτό είναι πολύ διαφορετικό.
Η <code>reset</code> θα μετακινήσει τον κλάδο στον οποίο δείχνει ο <code>HEAD</code> ενώ η <code>checkout</code> μετακινεί τον ίδιο το HEAD.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/en/v2/images/reset-checkout.png" >}}" alt="reset checkout">
</div>
</div>
</div>
<div class="sect4">
<h4 id="_με_διαδρομή">Με διαδρομή</h4>
<div class="paragraph">
<p>Ο άλλος τρόπος για να εκτελέσουμε την <code>checkout</code> είναι με διαδρομή αρχείου, η οποία, όπως η <code>reset</code>, δεν μετακινεί τον <code>HEAD</code>.
Είναι ακριβώς όπως η <code>git reset [branch] file</code> ως προς το ότι ενημερώνει το Ευρετήριο με αυτό το αρχείο σε αυτήν την υποβολή, αλλά επίσης αντικαθιστά το αρχείο στον Κατάλογο Εργασίας.
Θα ήταν ακριβώς όπως η <code>git reset --hard [branch] file</code> (αν η <code>reset</code> μας επέτρεπε να τρέξουμε κάτι τέτοιο) —δεν είναι ασφαλές για τον Κατάλογο Εργασίας και δεν μετακινεί το HEAD.</p>
</div>
<div class="paragraph">
<p>Επίσης, όπως οι <code>git reset</code> και <code>git add</code>, η <code>checkout</code> δέχεται επιλογή <code>--patch</code> για να μπορούμε να επαναφέρουμε επιλεκτικά τα περιεχόμενα του αρχείου κομμάτι-κομμάτι.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_ανακεφαλαίωση_9">Ανακεφαλαίωση</h3>
<div class="paragraph">
<p>Πλέον καταλαβαίνουμε περισσότερο και αισθανόμαστε πιο άνετα με την εντολή <code>reset</code>, αλλά ίσως εξακολουθούμε να είμαστε λίγο μπερδεμένοι σχετικά με τον τρόπο που διαφέρει από την <code>checkout</code> και σίγουρα δεν μπορούμε να θυμηθούμε όλους τους κανόνες των διαφορετικών κλήσεων.</p>
</div>
<div class="paragraph">
<p>Ακολουθεί ένα σκονάκι σχετικά με το ποιες εντολές επηρεάζουν ποια δέντρα.
Η στήλη <code>HEAD</code> γίνεται <code>REF</code> αν αυτή η εντολή μετακινεί την αναφορά (κλάδο) στην οποία δείχνει ο <code>HEAD</code> και <code>HEAD</code> αν μετακινεί τον ίδιο τον <code>HEAD</code>.
Ιδιαίτερη προσοχή χρειάζεται η στήλη “Ασφαλής για ΚΕ;” —αν αναφέρει <strong>ΟΧΙ</strong>, τότε πρέπει να ξανασκεφτούμε αν πραγματικά θέλουμε να εκτελέσουμε αυτήν την εντολή.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">HEAD</th>
<th class="tableblock halign-left valign-top">Ευρετήριο</th>
<th class="tableblock halign-left valign-top">Κατάλογος Εργασίας</th>
<th class="tableblock halign-left valign-top">Ασφαλές για ΚΕ;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Επίπεδο υποβολής</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reset --soft [commit]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΟΧΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΟΧΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reset [commit]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΟΧΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reset --hard [commit]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ΟΧΙ</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkout [commit]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Επίπεδο αρχείου</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reset (commit) [file]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΟΧΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΟΧΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkout (commit) [file]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΟΧΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ΝΑΙ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ΟΧΙ</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>